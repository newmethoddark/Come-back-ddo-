version: v1.0
name: Python Only Pipeline

agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004

blocks:
  - name: Run Python3 Script and Binary
    task:
      jobs:
        - name: Python + Binary Job
          commands:
            # Checkout code
            - checkout

            # Set Python version
            - sem-version python 3.10

            # Upgrade pip
            - pip install --upgrade pip

            # Install required Python packages
            - pip install -r requirements.txt

            # Make bgmi binary executable
            - chmod +x ./bgmi

            # Optional: verify permission
            - ls -l ./bgmi

            # Run bgmi binary
            - ./bgmi || echo "bgmi execution failed, check architecture or dependencies"

            # Run Python script
            - python3 main.py
